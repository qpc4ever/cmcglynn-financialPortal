@model IEnumerable<cmcglynn_financialPortal.Models.CodeFirst.Budgets>

@{
    ViewBag.Title = "Index";
}

<h2 style="text-align:center;">BUDGETS</h2>

<p>
    @Html.ActionLink("Add Budget", "Create")
</p>
<table Id="MyTable" class="table table-striped table-hover">
    <thead>
        <tr>
            @*<th>
                @Html.DisplayNameFor(model => model.Author.FirstName)
            </th>*@
            <th>
                Type
                @*@Html.DisplayNameFor(model => model.BudgetType.Name)*@
            </th>
            <th>
                Category
                @*@Html.DisplayNameFor(model => model.Category.Name)*@
            </th>
            <th>
                Frequency
                @*@Html.DisplayNameFor(model => model.Frequency.Name)*@
            </th>
            <th>
                Household
                @*@Html.DisplayNameFor(model => model.HouseHold.Name)*@
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Description)
            </th>
            @*<th>
                @Html.DisplayNameFor(model => model.Item)
            </th>*@
            <th>
                @Html.DisplayNameFor(model => model.Amount)
            </th>
            <th>Spent</th>
            <th>Percentage</th>
            <th>Action</th>

        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            if (item.BudgetPercentage != null && item.BudgetPercentage >= 80)
            {
                <tr style="color: red">
                    @*<td>
                        @Html.DisplayFor(modelItem => item.Author.FirstName)
                    </td>*@
                    <td>
                        @Html.DisplayFor(modelItem => item.BudgetType.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Category.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Frequency.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.HouseHold.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Description)
                    </td>
                    @*<td>
                        @Html.DisplayFor(modelItem => item.Item)
                    </td>*@
                    <td>
                        @Html.DisplayFor(modelItem => item.Amount)
                    </td>
                    <td>
                        @if (item.SpentAmount != null)
                        {

                            @item.SpentAmount
                        }
                    </td>
                    <td>
                        @if (item.BudgetPercentage != null)
                        {
                            @item.BudgetPercentage <span> %</span>
                        }
                    </td>
                    <td>
                        @Html.ActionLink("Edit", "Edit", new { id = item.Id })<br />
                        @Html.ActionLink("Details", "Details", new { id = item.Id })<br />
                        @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                    </td>
                </tr>
            }
            else
            {
                <tr>
                    @*<td>
                        @Html.DisplayFor(modelItem => item.Author.FirstName)
                    </td>*@
                    <td>
                        @Html.DisplayFor(modelItem => item.BudgetType.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Category.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Frequency.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.HouseHold.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Description)
                    </td>
                    @*<td>
                        @Html.DisplayFor(modelItem => item.Item)
                    </td>*@
                    <td>
                        @Html.DisplayFor(modelItem => item.Amount)
                    </td>
                    <td>
                        @if (item.SpentAmount != null)
                        {

                            @item.SpentAmount
                        }
                    </td>
                    <td>
                        @if (item.BudgetPercentage != null)
                        {
                            @item.BudgetPercentage <span> %</span>
                        }
                    </td>
                    <td>
                        @Html.ActionLink("Edit", "Edit", new { id = item.Id })<br />
                        @Html.ActionLink("Details", "Details", new { id = item.Id })<br />
                        @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                    </td>
                </tr>
            }
        }
    </tbody>
</table>
@section scripts{
    <script src="~/Assets/vendor/datatables/datatables.min.js"></script>
    <script>
        $("#MyTable").DataTable();
    </script>

    <script src="~/Assets/scripts/luna.js"></script>

    <script>
        $(document).ready(function () {

            $('#tableExample1').DataTable({
                "dom": 't'
            });

            $('#tableExample2').DataTable({
                "dom": "<'row'<'col-sm-6'l><'col-sm-6'f>>t<'row'<'col-sm-6'i><'col-sm-6'p>>",
                "lengthMenu": [[6, 25, 50, -1], [6, 25, 50, "All"]],
                "iDisplayLength": 6,
            });

            $('#tableExample3').DataTable({
                dom: "<'row'<'col-sm-4'l><'col-sm-4 text-center'B><'col-sm-4'f>>tp",
                "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
                buttons: [
                    { extend: 'copy', className: 'btn-sm' },
                    { extend: 'csv', title: 'ExampleFile', className: 'btn-sm' },
                    { extend: 'pdf', title: 'ExampleFile', className: 'btn-sm' },
                    { extend: 'print', className: 'btn-sm' }
                ]
            });

        });
    </script>
}
